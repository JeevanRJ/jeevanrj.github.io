{% include base_path %}

{% assign media_width = "240px" %}

{%- assign has_media = false -%}
{%- if post.video_url or post.slides_embed or post.header.teaser -%}
  {%- assign has_media = true -%}
{%- endif -%}

<div class="archive__item" style="margin-bottom: 2.5em;">

  <div style="
    display: flex;
    gap: 32px;
    align-items: flex-start;
    justify-content: flex-start;
    margin: 0 auto;
    max-width: 1100px;
    flex-wrap: wrap;
  ">

    {%- if has_media -%}
      <!-- MEDIA (only shown when media exists) -->
      <div style="flex: 0 0 {{ media_width }}; max-width: {{ media_width }};">

        {%- if post.video_url -%}

          {%- if post.video_url contains 'youtube' or post.video_url contains 'vimeo' -%}
            <iframe
              src="{{ post.video_url }}"
              style="width: {{ media_width }}; height: 160px; border-radius: 8px;"
              frameborder="0"
              allowfullscreen>
            </iframe>
          {%- else -%}
            <video controls style="width: {{ media_width }}; border-radius: 8px;">
              <source src="{{ base_path }}{{ post.video_url }}" type="video/mp4">
              Your browser does not support the video tag.
            </video>
          {%- endif -%}

        {%- elsif post.slides_embed -%}

          <iframe
            src="{{ post.slides_embed }}"
            style="
              width: 100%;
              max-width: 360px;
              height: 220px;
              border: 1px solid #ddd;
              border-radius: 8px;
            "
            allowfullscreen>
          </iframe>

        {%- elsif post.header.teaser -%}

          <img
            src="{{ base_path }}{{ post.header.teaser }}"
            style="width: {{ media_width }}; height: auto; border-radius: 8px;"
            alt="Activity image" />

        {%- endif -%}

      </div>
    {%- endif -%}

    <!-- TEXT -->
    <div style="
      flex: 1;
      min-width: 320px;
      max-width: {% if has_media %}760px{% else %}1100px{% endif %};
    ">

      <!-- Date (Month Year) + Location -->
      <div style="margin: 0 0 0.5em 0; font-weight: 700;">
        üóìÔ∏è {{ post.date | date: "%B %Y" }}
        {% if post.location %} &nbsp;‚Ä¢&nbsp; üìç {{ post.location }}{% endif %}
      </div>

      <h2 style="margin: 0 0 0.6em 0; font-weight: 800; text-align: left;">
        {{ post.title }}
      </h2>

      {% if post.content %}
        <div style="font-size: 1.05em; line-height: 1.7;">
          {{ post.content | markdownify }}
        </div>
      {% endif %}

    </div>

  </div>

  <hr style="margin: 2.0em 0;">

</div>

  <hr style="margin: 2.0em 0;">

</div>
