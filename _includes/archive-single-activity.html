{% include base_path %}

{% assign media_width = "240px" %}

<div class="archive__item" style="margin-bottom: 2.5em;">

  <!-- Date (Month Year) -->
  <div style="text-align:center; margin: 2.0em 0 0.75em 0;">
    <div style="font-size: 1.15em; font-weight: 700;">
      üóìÔ∏è {{ post.date | date: "%B %Y" }}
      {% if post.location %}
        : üìç {{ post.location }}
      {% endif %}
    </div>
  </div>

  <!-- Two-column responsive layout -->
  <div style="
    display:flex;
    gap:32px;
    align-items:flex-start;
    justify-content:center;
    margin: 0 auto;
    max-width: 1100px;
    flex-wrap: wrap;
  ">

    <!-- MEDIA (video OR slides OR image) -->
    <div style="flex: 0 0 {{ media_width }}; max-width: {{ media_width }};">

      {%- if post.video_url -%}

        {%- if post.video_url contains "youtube" or post.video_url contains "vimeo" -%}
          <iframe src="{{ post.video_url }}"
                  style="width: {{ media_width }}; height: 160px; border-radius: 8px;"
                  frameborder="0"
                  allowfullscreen></iframe>
        {%- else -%}
          <video controls style="width: {{ media_width }}; border-radius: 8px;">
            <source src="{{ base_path }}{{ post.video_url }}" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        {%- endif -%}

      {%- elsif post.slides_embed -%}

  <iframe
    src="{{ post.slides_embed }}"
    style="
      width: 100%;
      max-width: 360px;
      height: 220px;
      border: 1px solid #ddd;
      border-radius: 8px;
    "
    allowfullscreen>
  </iframe>

        {%- if post.header.teaser -%}
          <a href="{{ post.slides_url | relative_url }}"
             target="_blank"
             rel="noopener noreferrer"
             style="text-decoration:none;">
            <img src="{{ base_path }}{{ post.header.teaser }}"
                 style="width: {{ media_width }}; height: auto; border-radius: 8px; cursor: pointer;"
                 alt="Slides thumbnail" />
          </a>
        {%- else -%}
          <a href="{{ post.slides_url | relative_url }}"
             target="_blank"
             rel="noopener noreferrer">
            Open slides
          </a>
        {%- endif -%}

      {%- elsif post.header.teaser -%}

        <img src="{{ base_path }}{{ post.header.teaser }}"
             style="width: {{ media_width }}; height: auto; border-radius: 8px;"
             alt="Activity image" />

      {%- endif -%}

    </div>

    <!-- TEXT (title + full content) -->
    <div style="flex: 1; min-width: 320px; max-width: 760px;">

      <h2 style="margin: 0 0 0.6em 0; font-weight: 800; text-align: center;">
        {{ post.title }}
      </h2>

      {% if post.content %}
        <div style="font-size: 1.05em; line-height: 1.7;">
          {{ post.content | markdownify }}
        </div>
      {% endif %}

    </div>

  </div>

  <hr style="margin: 2.0em 0;">

</div>

